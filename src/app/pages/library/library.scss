:host { display:block; position:relative; }

/* ===== พื้นหลังแบบเดียวกับหน้าเกมหลัก ===== */
.lib-page{
  min-height:100vh;
  position:relative;
  padding:40px 16px 64px;
  background:
    radial-gradient(1200px 600px at 20% -10%, #372668 0%, #1b1236 45%, #120a26 100%),
    url('/images/Bg.png') center/cover no-repeat fixed;
  isolation:isolate;
  color:#fff;

  &::before{
    content:'';
    position:absolute; inset:0;
    background:rgba(20,16,35,.78);
    z-index:0;
  }
  > *{ position:relative; z-index:1; }
  &.loading{ opacity:.6; pointer-events:none; }

  /* ปิดสกรอลล์พื้นหลังเมื่อเปิดโมดัล */
  &.noscroll{ height:100vh; overflow:hidden; }
}

/* ===== Header ===== */
.lib-head{
  display:flex; justify-content:space-between; align-items:flex-end; flex-wrap:wrap; margin-bottom:20px;
  .title{ font-size:34px; font-weight:800; text-shadow:0 4px 28px rgba(0,0,0,.35); }
  .meta{ opacity:.9; font-size:15px; color:#d9d7ff; }
}

/* ===== Toolbar ===== */
.toolbar{
  display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin-bottom:26px;

  .search{
    position:relative; flex:1 1 240px; max-width:300px;
    input{
      width:100%; padding:10px 36px 10px 12px;
      border-radius:12px; border:1px solid rgba(255,255,255,.15);
      background:rgba(255,255,255,.08); color:#fff; outline:none;
      transition: box-shadow .2s, border-color .2s;
      &::placeholder{ color:#bfbfde; }
      &:focus{ border-color:#a78bfa; box-shadow:0 0 0 4px rgba(167,139,250,.15); }
    }
    .clear{
      position:absolute; right:8px; top:50%; transform:translateY(-50%);
      background:transparent; border:none; color:#fff; opacity:.6; cursor:pointer; font-size:16px;
      transition:opacity .2s; &:hover{ opacity:1; }
    }
  }

  /* ===== Select: ชัดขึ้น มองง่าย ===== */
  .select{
    font-size:16px; line-height:1.25;
    padding:10px 40px 10px 14px;
    min-width:170px;

    color:#fff;
    background:rgba(255,255,255,.14);
    border:1px solid rgba(255,255,255,.35);
    border-radius:12px;
    cursor:pointer;

    transition: box-shadow .18s, border-color .18s, background .18s;
    &:hover{ background:rgba(255,255,255,.20); }
    &:focus{
      outline:none;
      border-color:#a78bfa;
      box-shadow:0 0 0 4px rgba(167,139,250,.22);
      background:rgba(255,255,255,.22);
    }

    appearance:none; -webkit-appearance:none; -moz-appearance:none;
    background-image:
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%23FFFFFF' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
    background-repeat:no-repeat;
    background-position:right 12px center;
    background-size:18px;
  }
  .select option{
    background:#151224;   /* พื้นหลังลิสต์ */
    color:#ffffff;        /* ตัวอักษร */
  }
  @supports (-moz-appearance: none) {
    .select{ padding-right:44px; } /* กันลูกศรทับข้อความใน Firefox */
  }
}

/* ===== Grid ===== */
.grid{ display:grid; grid-template-columns:repeat(auto-fill, minmax(280px,1fr)); gap:18px; }

.card{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  border-radius:16px; overflow:hidden; padding:14px;
  backdrop-filter: blur(8px);
  display:flex; gap:12px; cursor:pointer;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;

  &:hover{ transform:translateY(-4px); border-color:#8b5cf6; box-shadow:0 10px 26px rgba(139,92,246,.28); }

  .thumb{
    width:90px; height:90px; border-radius:10px; overflow:hidden; flex-shrink:0;
    background:linear-gradient(135deg,#6b7cff,#a78bfa);
    img{ width:100%; height:100%; object-fit:cover; display:block; }
  }
  .info{
    display:flex; flex-direction:column; justify-content:space-between; flex:1;
    .row1{
      display:flex; align-items:center; justify-content:space-between; gap:8px;
      .name{ font-size:16px; font-weight:700; color:#fff; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
      .badge{ font-size:12px; padding:4px 8px; background:rgba(139,92,246,.25); border-radius:8px; border:1px solid rgba(139,92,246,.5); }
    }
    .row2{ display:flex; justify-content:space-between; align-items:center; font-size:14px;
      .price{ font-weight:700; } .date{ opacity:.75; }
    }
    .actions{ display:flex; gap:8px; margin-top:8px;
      .btn{
        padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.2);
        background:rgba(255,255,255,.08); color:#fff; cursor:pointer; font-size:14px;
        transition:background .2s; &:hover{ background:rgba(255,255,255,.18); }
        &.ghost{ background:transparent; }
      }
    }
  }
}

/* ===== Empty ===== */
.empty{ color:#fff; opacity:.9; text-align:center; margin:40px 0;
  h3{ font-size:20px; margin-bottom:10px; }
  .cta{ display:inline-block; padding:10px 16px; border-radius:10px;
        background:linear-gradient(135deg,#8b5cf6,#43e97b); color:#fff; text-decoration:none; font-weight:600; }
}

/* ===== Modal ===== */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.55);
  opacity:0; pointer-events:none; transition:opacity .2s; z-index:50;
  &.show{ opacity:1; pointer-events:auto; }
}

.modal{
  position:fixed; inset:0; display:grid; place-items:center;
  opacity:0; pointer-events:none; transition:opacity .2s; z-index:60;
  &.show{ opacity:1; pointer-events:auto; }
}

/* แผงโมดัล */
.modal-panel{
  width: min(92vw, 900px);
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;           /* กันรูป/เนื้อหาล้น */
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.1);
  background: rgba(20,20,35,.9);
}

/* หัวโมดัล */
.modal-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 16px; background:rgba(30,30,50,.9);
  border-bottom:1px solid rgba(255,255,255,.08);
  h2{ margin:0; font-size:18px; font-weight:700; }
  .icon-btn{ border:none; background:transparent; color:#fff; font-size:18px; cursor:pointer; }
}

/* ตัวเนื้อหาโมดัลสกรอลล์ได้เอง */
.modal-body{
  padding:16px 20px; overflow:auto; color:#fff;
}

/* เลย์เอาต์รายละเอียด: ซ้ายรูป ขวาข้อมูล */
.detail{
  display:grid; grid-template-columns:220px 1fr; gap:16px; align-items:start;
}
.cover{
  width:220px; height:220px; border-radius:12px; overflow:hidden; flex-shrink:0;
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1);
}
.cover img{
  width:100%; height:100%; object-fit:cover; display:block;  /* เปลี่ยนเป็น contain ถ้าต้องเห็นทั้งภาพ */
}
.info .title{ font-size:20px; font-weight:800; margin:0 0 6px; }
.rows{ display:grid; gap:6px; }
.row{ display:flex; justify-content:space-between; gap:12px; }
.label{ opacity:.8; }
.desc{ margin-top:10px; line-height:1.6; opacity:.95; }
.modal-actions{ margin-top:12px; }

/* Spinner ตัวอย่าง */
.spinner{
  width:28px; height:28px; border-radius:50%;
  border:3px solid rgba(255,255,255,.25); border-top-color:#8b5cf6;
  animation:spin .8s linear infinite; margin:8px 0;
}
@keyframes spin{ to{ transform:rotate(360deg); } }

/* Responsive */
@media (max-width:720px){
  .lib-head .title{ font-size:26px; }
  .card{ flex-direction:column; align-items:center; text-align:center;
    .thumb{ width:100%; height:180px; }
  }
  .detail{ grid-template-columns:1fr; }
  .cover{ width:100%; height:auto; aspect-ratio:16/9; }
  .cover img{ object-fit:cover; }
}
